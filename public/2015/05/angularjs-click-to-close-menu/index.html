    <!DOCTYPE html>
<html lang="en-us">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="author" content="Logan Edwards">
		<meta name="description" content="Describe your website">
		<meta name="generator" content="Hugo 0.14" />
		<title>AngularJS Click to Close Menu &middot; Hugo Cactus Theme</title>
		<link rel="shortcut icon" href="http://localhost:1313/images/favicon.ico">
		<link rel="stylesheet" href="http://localhost:1313/css/style.css">
		<link rel="stylesheet" href="http://localhost:1313/css/highlight.css">
		<link href="http://localhost:1313/index.xml" rel="alternate" type="application/rss+xml" title="Hugo Cactus Theme" />
	</head>
    <body>
       <nav class="main-nav">
	
	
		<a href='http://localhost:1313/'> <span class="arrow">←</span>Home</a>
	

	
		<a href='http://localhost:1313/about'>About</a>
	

	
	<a class="cta" href="http://localhost:1313/index.xml">Subscribe</a>
	
</nav>

        <section id="wrapper">
            <article class="post">
                <header>
                    <h1>AngularJS Click to Close Menu</h1>
                    <h2 class="headline">May 22, 2015</h2>
                </header>
                <section id="post-body">
                    

<p>Recently, at <a href="http://www.zubie.com" target="_blank">work</a>, I came across (or was told to fix) a need to give a more natural feel to the UX on our web app. We have various menus throughout the app that can be toggled by clicking/touching an element, but the only way to close them is to click/touch the same element again. With mobile UX paradigms making their way into every aspect of our lives, I had to rethink the original approach on how to show or hide content when the user&#8217;s interactions are required. I&#8217;m used to swipes and clicking <strong>off</strong> of elements to close them, so let&#8217;s bring them to our web experience.</p>

<p>AngularJS has a great set of directives, including <code>ng-show</code>, which I use extensively to display or hide content based on user interaction or the <a href="http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller" target="_blank">model</a>.</p>

<p>The app is becoming more complex and allows for more interaction that originally designed, so it was time to sit down and fix the wonky interaction!</p>

<p>Here&#8217;s how I solved the problem.</p>

<ol>
<li>Create a directive to throw on an element that will be interacted with</li>
<li>(Optional) Add a class to child elements where you want to prevent the default close behavior. For this, you&#8217;ll need to modify the directive to check for the existence of the child class.</li>
</ol>

<h2 id="directive:c4a850bcbebf4c52fb6a9d3d2b2ff6a6">Directive</h2>

<pre class="lang:js decode:true ">'use strict';
angular.module('app')
    .directive('closeOnClick', function () {
        return {
            scope: {
                watchValue: '='
            },
            restrict: 'EA',
            link: function (scope, element) {
                element.bind('click', function (e) {
                    scope.watchValue = !scope.watchValue;
                    // prevents a double click behavior                    
                    e.stopPropagation();
                    // let Angular know we're doing our thing
                    scope.$apply()
                });
            },
            controller: function ($scope, $document) {
                $document.on('click', function (e) {
                    if ($scope.watchValue) {
                        $scope.watchValue = false;
                        $scope.$apply();
                    }
                });
            }
        }
});</pre>

<p>What is happening is an event handler is bound to the element on creation (during the linking phase). This is what listens to our click and inverts the the watchValue that we defined. The controller function takes care of listening for clicks on the document as a whole and if the menu or object is open (or truthy), then, let&#8217;s go ahead and close/hide the element.</p>

<p>Usage in the view</p>

<pre class="lang:xhtml decode:true" title="Usage in the view">&lt;div close-on-click watch-value="showStuff"&gt;
    &lt;div ng-show="showStuff"&gt;
        &lt;h1&gt;Cool hidden stuff&lt;/h1&gt;
    &lt;/div&gt;
&lt;/div&gt;</pre>

<p>That&#8217;s it! Now, we have an improved user experience with Angular&#8217;s most powerful component, directives!</p>

                </section>
            </article>
            <footer id="post-meta" class="clearfix">
                <a href="https://twitter.com/https://twitter.com/loganwedwards">
                        <img class="avatar" src="http://localhost:1313/images/avatar.png">
                        <div>
                            <span class="dark">Logan Edwards</span>
                            <span>I&#39;m an engineer, family man and co-founder of Fount.</span>
                        </div>
                    </a>
                <section id="sharing">
                    <a class="twitter" href="https://twitter.com/intent/tweet?text=http://localhost:1313/http%3a%2f%2flocalhost%3a1313%2f2015%2f05%2fangularjs-click-to-close-menu%2f - AngularJS%20Click%20to%20Close%20Menu by @https%3a%2f%2ftwitter.com%2floganwedwards"><span class="icon-twitter"> Tweet</span></a>

<a class="facebook" href="#" onclick="
    window.open(
      'https://www.facebook.com/sharer/sharer.php?u='+encodeURIComponent(location.href),
      'facebook-share-dialog',
      'width=626,height=436');
    return false;"><span class="icon-facebook-rect"> Share</span>
</a>
                </section>
            </footer>

            
                <section class="disqus">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = '';
        var disqus_developer = 0; 
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="//disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>
            

            <ul id="post-list" class="archive readmore">
    <h3>Read more</h3>
    
    
        
        <li>
            <a href="http://localhost:1313/post/wordpress-to-hugo/">Wordpress to Hugo<aside class="dates">Aug 9</aside></a>
        </li>
        
   
    
        
   
    
        
        <li>
            <a href="http://localhost:1313/2015/05/3d-printing-caps/">3D Printing Caps<aside class="dates">May 9</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="http://localhost:1313/2015/01/how-to-auto-mount-a-network-share-drobo-5n-on-ubuntu/">How To Auto Mount a Network Share (Drobo 5N) on Ubuntu<aside class="dates">Jan 24</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="http://localhost:1313/2014/06/sugru-hack-an-auxiliary-cord-holder/">Sugru hack: An Auxiliary Cord Holder.<aside class="dates">Jun 18</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="http://localhost:1313/2014/03/helpful-plugins-for-migrating-wordpress-from-localhost-to-production/">Helpful Plugins for Migrating WordPress from localhost to Production<aside class="dates">Mar 9</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="http://localhost:1313/2013/10/bracket-and-stand-for-the-ipad-mini/">Bracket and Stand for the iPad Mini<aside class="dates">Oct 15</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="http://localhost:1313/2013/09/improving-solidoodle-prints/">Improving Solidoodle Prints<aside class="dates">Sep 29</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="http://localhost:1313/2013/09/one-printer-fixes-another/">One Printer Fixes Another<aside class="dates">Sep 16</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="http://localhost:1313/2013/07/my-timer-web-app/">My Timer Web App<aside class="dates">Jul 18</aside></a>
        </li>
        
   
</ul>
            <footer id="footer">
    <p class="small">
        © Copyright 2015 Logan Edwards
    </p>
</footer>
        </section>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="http://localhost:1313/js/main.js"></script>
<script src="http://localhost:1313/js/highlight.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
    <script data-no-instant>document.write('<script src="http://'
        + (location.host || 'localhost').split(':')[0]
		+ ':1313/livereload.js?mindelay=10"></'
        + 'script>')</script></body>
</html>
